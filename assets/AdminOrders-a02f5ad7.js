import{g as M,h as $,_ as m,o as l,c as r,a as t,t as a,m as w,e as v,M as h,r as c,F as _,B as E,b as u}from"./index-a1ec8525.js";import{d as T,p as V}from"./productPagination-c0f93123.js";const{VITE_URL:O,VITE_PATH:k}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kc777",BASE_URL:"/Burger/",MODE:"production",DEV:!1,PROD:!0},p=M("orderStore",{state:()=>({ordersData:[],pagination:{}}),actions:{getOrders(e=1){const s=`${O}api/${k}/admin/orders/?page=${e}`;$.get(s).then(o=>{this.ordersData=o.data.orders,this.pagination=o.data.pagination}).catch(o=>{swal.fire({icon:"error",title:`${o.response.data.message}`,showConfirmButton:!1})})}},getters:{orders:({ordersData:e})=>e,pages:({pagination:e})=>e}}),y={props:["tempProduct"]},B={class:"modal-dialog"},D={class:"modal-content border-0"},C=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"delProductModalLabel",class:"modal-title"},[t("span",null,"訂單內容")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),I={class:"modal-body"},L={class:"mb-2 p-1"},A={class:"mb-2 p-1"},R={class:"mb-2 p-1"},S={class:"mb-2 p-1"},U=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 關閉 ")],-1);function x(e,s,o,b,i,n){return l(),r("div",B,[t("div",D,[C,t("div",I,[t("div",L,"訂單編號："+a(o.tempProduct.id),1),t("div",A,"訂單日期："+a(o.tempProduct.create_at),1),t("div",R,"總金額："+a(o.tempProduct.total),1),t("div",S,"訂單狀態："+a(o.tempProduct.is_paid?"已付款":"未付款"),1)]),U])])}const H=m(y,[["render",x]]),{VITE_URL:F,VITE_PATH:N}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kc777",BASE_URL:"/Burger/",MODE:"production",DEV:!1,PROD:!0},j={data(){return{tempProduct:{imagesUrl:[]},page:{}}},components:{orderStore:p,orderModal:H,deleteModal:T,productPagination:V},computed:{...w(p,["orders","pages"])},methods:{...v(p,["getOrders"]),deleteProduct(){const e=`${F}api/${N}/admin/order/${this.tempProduct.id}`;this.$http.delete(e).then(()=>{this.getOrders(),this.deleteModal.hide(),this.$swal({title:"刪除成功！",icon:"success",showConfirmButton:!1})}).catch(s=>{this.$swal({title:s.response.data.message,icon:"error",showConfirmButton:!1})})},openModal(e,s){e==="check"?(this.orderModal.show(),this.tempProduct={...s}):e==="del"&&(this.deleteModal.show(),this.tempOrder={...s})},switchDate(e){return new Date(e*1e3).toISOString().slice(0,10)}},mounted(){this.getOrders(),this.orderModal=new h("#orderModal"),this.deleteModal=new h("#deleteModal")}},q={id:"main",class:"container"},z={class:"table mt-4"},G=t("thead",null,[t("tr",null,[t("th",{width:"120"},"訂單日期"),t("th",null,"訂單編號"),t("th",{width:"120"},"訂購人"),t("th",{width:"120"}),t("th",{width:"100"},"狀態"),t("th",{width:"120"},"編輯")])],-1),J={class:""},K={class:"text-success"},Q={class:"btn-group"},W=["onClick"],X=["onClick"],Y={id:"orderModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},Z={id:"deleteModal",ref:"deleteModal",class:"modal fade",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"};function tt(e,s,o,b,i,n){const g=c("productPagination"),f=c("order-modal"),P=c("delete-modal");return l(),r(_,null,[t("div",q,[t("table",z,[G,(l(!0),r(_,null,E(e.orders,d=>(l(),r("tbody",{key:d.id},[t("tr",null,[t("td",null,[t("span",J,a(n.switchDate(d.create_at)),1)]),t("td",null,a(d.id),1),t("td",null,a(d.user.name),1),t("td",null,a(d.user.cartTotal),1),t("td",null,[t("span",K,a(d.is_paid?"已付款":"未付款"),1)]),t("td",null,[t("div",Q,[t("button",{type:"button",id:"viewBtn",class:"btn btn-outline-secondary btn-sm",onClick:()=>n.openModal("check",d)}," 檢視 ",8,W),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:()=>n.openModal("del",d)}," 刪除 ",8,X)])])])]))),128))]),u(g,{pages:e.pages,"get-data":e.getOrders,onChangePage:e.getOrders},null,8,["pages","get-data","onChangePage"])]),t("div",Y,[u(f,{"temp-product":i.tempProduct,"update-product":e.updateProduct},null,8,["temp-product","update-product"])],512),t("div",Z,[u(P,{"temp-product":i.tempProduct,"delete-product":n.deleteProduct},null,8,["temp-product","delete-product"])],512)],64)}const st=m(j,[["render",tt]]);export{st as default};
