import{P as g}from"./PageBanner-f0cb60a0.js";import{_ as h,r as t,o as w,c as V,b as a,d as s,w as b,F as P,G as u}from"./index-ace94a49.js";const{VITE_URL:v}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kc777",BASE_URL:"/Burger/",MODE:"production",DEV:!1,PROD:!0},B={data(){return{pageTitle:{title:"後台管理"},user:{username:"",password:""},isProcessing:!1}},components:{PageBanner:g},methods:{login(){this.isProcessing=!0;const i=`${v}admin/signin`;this.$http.post(i,this.user).then(e=>{if(e.data.success){const{token:l,expired:r}=e.data;document.cookie=`hexToken=${l}; expires=${new Date(r)};`,this.$router.push("/admin/products"),this.$swal({title:e.data.message,icon:"success",showConfirmButton:!1})}}).catch(e=>{this.$swal({title:e.response.data.message,icon:"error",showConfirmButton:!1}),this.isProcessing=!1})}}},E={id:"page-content",class:"container"},x={class:"row"},T=s("div",{class:"page-title"},"管理登入",-1),k={class:"form-floating mb-3"},F=s("label",{for:"email"},"Email address",-1),C={class:"form-floating"},U=s("label",{for:"password"},"Password",-1),y=["disabled"];function D(i,e,l,r,o,p){const _=t("PageBanner"),c=t("VField"),d=t("ErrorMessage"),f=t("VForm");return w(),V(P,null,[a(_,{pageTitle:o.pageTitle},null,8,["pageTitle"]),s("section",E,[s("div",x,[T,a(f,{class:"form-signin col-8 m-auto",onSubmit:p.login},{default:b(({errors:m})=>[s("div",k,[a(c,{id:"email",name:"email",type:"email",modelValue:o.user.username,"onUpdate:modelValue":e[0]||(e[0]=n=>o.user.username=n),class:u(["form-control",{"is-invalid":m.email}]),placeholder:"name@example.com",rules:"email|required"},null,8,["modelValue","class"]),a(d,{name:"email",class:"invalid-feedback"}),F]),s("div",C,[a(c,{id:"password",name:"password",type:"password",modelValue:o.user.password,"onUpdate:modelValue":e[1]||(e[1]=n=>o.user.password=n),class:u(["form-control",{"is-invalid":m.password}]),placeholder:"Password",rules:"required"},null,8,["modelValue","class"]),a(d,{name:"password",class:"invalid-feedback"}),U]),s("button",{class:"btn btn-lg btn-primary w-100 mt-5",type:"submit",disabled:o.isProcessing}," 登入 ",8,y)]),_:1},8,["onSubmit"])])])],64)}const $=h(B,[["render",D]]);export{$ as default};
