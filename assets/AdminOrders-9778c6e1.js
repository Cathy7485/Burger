import{h as P,i as w,_ as g,o as r,c as i,d as t,t as a,m as v,f as D,M as m,r as u,F as _,B as E,b as h}from"./index-ace94a49.js";import{d as T,p as V}from"./productPagination-95c96ea4.js";const{VITE_URL:y,VITE_PATH:O}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kc777",BASE_URL:"/Burger/",MODE:"production",DEV:!1,PROD:!0},p=P("orderStore",{state:()=>({ordersData:[],pagination:{}}),actions:{getOrders(e=1){const o=`${y}api/${O}/admin/orders/?page=${e}`;w.get(o).then(s=>{this.ordersData=s.data.orders,this.pagination=s.data.pagination}).catch(s=>{swal.fire({icon:"error",title:`${s.response.data.message}`,showConfirmButton:!1})})},createDate(e){const o=new Date(e*1e3),s=o.getFullYear(),c=o.getMonth()+1>=10?o.getMonth()+1:`0${o.getMonth()+1}`,n=o.getDate()>=10?o.getDate():`0${o.getDate()}`;return`${s}/${c}/${n}`}},getters:{orders:({ordersData:e})=>e,pages:({pagination:e})=>e}}),k={props:["tempProduct"]},B={class:"modal-dialog"},C={class:"modal-content border-0"},I=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{id:"delProductModalLabel",class:"modal-title"},[t("span",null,"訂單內容")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),L={class:"modal-body"},A={class:"mb-2 p-1"},R={class:"mb-2 p-1"},S={class:"mb-2 p-1"},U={class:"mb-2 p-1"},x=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 關閉 ")],-1);function H(e,o,s,c,n,l){return r(),i("div",B,[t("div",C,[I,t("div",L,[t("div",A,"訂單編號："+a(s.tempProduct.id),1),t("div",R,"訂單日期："+a(s.tempProduct.create_at),1),t("div",S,"總金額："+a(s.tempProduct.total),1),t("div",U,"訂單狀態："+a(s.tempProduct.is_paid?"已付款":"未付款"),1)]),x])])}const F=g(k,[["render",H]]),{VITE_URL:N,VITE_PATH:Y}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kc777",BASE_URL:"/Burger/",MODE:"production",DEV:!1,PROD:!0},j={emits:["switchDate"],data(){return{tempProduct:{imagesUrl:[]},page:{}}},components:{orderStore:p,orderModal:F,deleteModal:T,productPagination:V},computed:{...v(p,["orders","pages"])},methods:{...D(p,["getOrders"]),deleteProduct(){const e=`${N}api/${Y}/admin/order/${this.tempProduct.id}`;this.$http.delete(e).then(()=>{this.getOrders(),this.deleteModal.hide(),this.$swal({title:"刪除成功！",icon:"success",showConfirmButton:!1})}).catch(o=>{this.$swal({title:o.response.data.message,icon:"error",showConfirmButton:!1})})},openModal(e,o){e==="check"?(this.orderModal.show(),this.tempProduct={...o}):e==="del"&&(this.deleteModal.show(),this.tempOrder={...o})},switchDate(e){return new Date(e*1e3).toISOString().slice(0,10)}},mounted(){this.getOrders(),this.orderModal=new m("#orderModal"),this.deleteModal=new m("#deleteModal")}},q={class:"main container"},z={class:"table mt-4"},G=t("thead",null,[t("tr",null,[t("th",{width:"120"},"訂單日期"),t("th",null,"訂單編號"),t("th",{width:"120"},"訂購人"),t("th",{width:"120"}),t("th",{width:"100"},"狀態"),t("th",{width:"120"},"編輯")])],-1),J={class:"text-success"},K={class:"btn-group"},Q=["onClick"],W=["onClick"],X={id:"orderModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},Z={id:"deleteModal",ref:"deleteModal",class:"modal fade",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"};function tt(e,o,s,c,n,l){const b=u("productPagination"),f=u("order-modal"),$=u("delete-modal");return r(),i(_,null,[t("div",q,[t("table",z,[G,(r(!0),i(_,null,E(e.orders,d=>(r(),i("tbody",{key:d.id},[t("tr",null,[t("td",null,[t("span",null,a(l.switchDate(d.create_at)),1)]),t("td",null,a(d.id),1),t("td",null,a(d.user.name),1),t("td",null,a(d.user.cartTotal),1),t("td",null,[t("span",J,a(d.is_paid?"已付款":"未付款"),1)]),t("td",null,[t("div",K,[t("button",{type:"button",id:"viewBtn",class:"btn btn-outline-secondary btn-sm",onClick:M=>l.openModal("check",d)}," 檢視 ",8,Q),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:M=>l.openModal("del",d)}," 刪除 ",8,W)])])])]))),128))]),h(b,{pages:e.pages,"get-data":e.getOrders,onChangePage:e.getOrders},null,8,["pages","get-data","onChangePage"])]),t("div",X,[h(f,{"temp-product":n.tempProduct},null,8,["temp-product"])],512),t("div",Z,[h($,{"temp-product":n.tempProduct,"delete-product":l.deleteProduct},null,8,["temp-product","delete-product"])],512)],64)}const st=g(j,[["render",tt]]);export{st as default};
