import{P as p}from"./PageBanner-bb813abc.js";import{_ as m,r as g,o as n,c as d,b as v,a as e,D as f,H as R,I as b,f as _,t as r,F as h,B as w}from"./index-e101f8e1.js";const{VITE_URL:T,VITE_PATH:y}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kc777",BASE_URL:"/Burger/",MODE:"production",DEV:!1,PROD:!0},B={data(){return{pageTitle:{title:"訂單查詢"},orders:[],orderNum:"",orderResult:{}}},components:{PageBanner:p},methods:{getOrders(){this.$http.get(`${T}api/${y}/orders`).then(t=>{this.orders=t.data.orders}).catch(t=>{this.$swal({title:t.response.data.message,icon:"error",showConfirmButton:!1})})},searchOrder(){let t="";t=this.orders.filter(o=>{if(this.orderNum===o.id)return o});const l=new Date(t[0].create_at*1e3);let a=l.getFullYear(),u=l.getMonth()+1,s=l.getDate(),i=l.getHours(),c=l.getMinutes();this.orderResult.date=`${a}/${u}/${s} 時間：${i}:${c}`,this.orderResult.id=t[0].id,this.orderResult.state=t[0].is_paid,this.orderResult.products=t[0].products,this.orderResult.num=t[0].num,this.orderResult.total=t[0].total,this.orderResult.user=t[0].user}},mounted(){this.getOrders()}},N={id:"page-content",class:"container"},x={id:"checkOrder",class:"row"},D={class:"col-lg-8 m-auto"},O={class:"form"},V=e("label",{for:"idNum",class:"form-label"},"訂單編號：",-1),k={class:"query"},E=e("div",{class:"title"},"查詢結果",-1),M={key:0,class:"result"},P={class:"row"},H={class:"col-lg-6"},I={class:"mb-2"},L=e("span",{class:"fw-bold"},"訂單日期：",-1),U={class:"mb-2"},A=e("span",{class:"fw-bold"},"訂單編號：",-1),C={class:"mb-2"},F=e("span",{class:"fw-bold"},"訂單狀態：",-1),q={class:"mb-2"},S=e("span",{class:"fw-bold mb-2"},"訂單內容：",-1),Y={class:"col-lg-6"},j=e("span",{class:"fw-bold"},"訂購人：",-1),z={key:1,class:"text-center"};function G(t,l,a,u,s,i){const c=g("PageBanner");return n(),d(h,null,[v(c,{pageTitle:s.pageTitle},null,8,["pageTitle"]),e("section",N,[e("div",x,[e("div",D,[e("div",O,[V,f(e("input",{type:"text",id:"idNum",class:"form-control",placeholder:"請輸入訂單編號","onUpdate:modelValue":l[0]||(l[0]=o=>s.orderNum=o)},null,512),[[R,s.orderNum]]),e("button",{type:"button",class:"btn btn-primary",onClick:l[1]||(l[1]=b((...o)=>i.searchOrder&&i.searchOrder(...o),["prevent"]))},"送出")]),e("div",k,[E,s.orderNum?(n(),d("div",M,[e("div",P,[e("div",H,[e("div",I,[L,_(" "+r(s.orderResult.date),1)]),e("div",U,[A,_(" "+r(s.orderResult.id),1)]),e("div",C,[F,e("span",null,r(s.orderResult.state?"已付款":"未付款"),1)]),e("div",q,[S,(n(!0),d(h,null,w(s.orderResult.products,o=>(n(),d("div",{class:"px-3 py-2 bg-light border-bottom",key:o.id},[e("div",null,"品名："+r(o.product.title),1),e("div",null,"數量："+r(o.qty),1),e("div",null,"價錢："+r(o.final_total),1)]))),128))]),e("div",null," 總金額："+r(s.orderResult.total),1)]),e("div",Y,[j,e("ul",null,[e("li",null,"姓名："+r(s.orderResult.user.name),1),e("li",null,"電話："+r(s.orderResult.user.tel),1),e("li",null,"信箱："+r(s.orderResult.user.email),1),e("li",null,"地址："+r(s.orderResult.user.address),1)])])])])):(n(),d("div",z,"請輸入訂單編號查詢訂單。"))])])])])],64)}const Q=m(B,[["render",G]]);export{Q as default};
