import{_ as m,m as g,e as v,r as f,o as n,c as a,b as T,a as t,t as e,F as r,B as x,f as y,x as u}from"./index-44048b3b.js";import{c}from"./cartStore-2385a37a.js";import{P as b}from"./PageBanner-3996638a.js";import"./sweetalert2.all-c026af76.js";const{VITE_URL:p,VITE_PATH:d}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"kc777",BASE_URL:"/Burger/",MODE:"production",DEV:!1,PROD:!0},w={data(){return{pageTitle:{title:"訂單結帳"},order:{},orderId:"",user:{},is_paid:"",total:""}},components:{PageBanner:b},computed:{...g(c,["carts"])},methods:{getOrder(){const{id:i}=this.$route.params;this.$http.get(`${p}api/${d}/order/${i}`).then(o=>{this.order=o.data.order,this.orderId=o.data.order.id,this.user=o.data.order.user,this.is_paid=o.data.order.is_paid,this.total=o.data.order.total}).catch(()=>{this.$swal({title:"資料錯誤",icon:"error",showConfirmButton:!1})})},payOrder(){this.order,this.$http.post(`${p}api/${d}/pay/${this.orderId}`).then(i=>{this.$router.push("/completed"),this.getCart()}).catch(()=>{this.$swal({title:"付款失敗",icon:"error",showConfirmButton:!1})})},...v(c,["getCart"])},mounted(){this.getOrder(),this.collapse=new Collapse(this.$refs.collapse,{toggle:!1})}},S={id:"page-content",class:"container"},B={class:"row"},I={class:"col-lg-12"},V=u('<ul class="cartStep"><li class="stepItem"><p>Step <span class="numText">1</span></p><p>確認訂單</p></li><li class="stepItem"><p>Step <span class="numText">2</span></p><p>填寫資料</p></li><li class="stepItem active"><p>Step <span class="numText">3</span></p><p>訂單結帳</p></li><li class="stepItem"><p>Step <span class="numText">4</span></p><p>完成訂購</p></li></ul>',1),C={class:"row"},E={class:"col-md-6"},P={class:"orderDetail"},k=t("p",{class:"title"},"訂單細節資訊",-1),L=t("p",null,null,-1),O={class:"d-flex justify-content-between align-items-center mb-1"},$={class:"title"},D={class:"ps-1"},A={class:"d-flex justify-content-between align-items-center p-1"},N=t("div",null,"總計：",-1),R={class:"col-md-6"},U={class:"orderInfo"},j=t("li",{class:"title"},"訂購人資訊",-1),z={class:"text-danger fw-bold"},F=u('<li><div class="d-inline-block me-4">請選擇付款方式：</div><select name="payment" id="payment" class="form-select d-inline-block w-50"><option selected disabled>請選擇</option><option value="現金">現金</option><option value="信用卡">信用卡</option></select></li>',1),H={class:"text-center mt-4"};function W(i,o,q,M,s,_){const h=f("PageBanner");return n(),a(r,null,[T(h,{pageTitle:s.pageTitle},null,8,["pageTitle"]),t("section",S,[t("div",B,[t("div",I,[t("div",null,[V,t("div",C,[t("div",E,[t("div",P,[k,L,t("p",null," 訂單編號："+e(s.orderId),1),(n(!0),a(r,null,x(s.order.products,l=>(n(),a("ul",{key:l.product.id},[t("li",null,[t("div",O,[t("div",$,e(l.product.title),1),t("div",null,e(l.product.price.toLocaleString("zh-TW"))+" 元",1)]),t("div",D," X "+e(l.qty),1)])]))),128)),t("div",A,[N,t("div",null,e(s.total.toLocaleString("zh-TW"))+" 元",1)])])]),t("div",R,[t("div",U,[t("ul",null,[j,t("li",null,"姓名："+e(s.user.name),1),t("li",null,"電話："+e(s.user.tel),1),t("li",null,"信箱："+e(s.user.email),1),t("li",null,"地址："+e(s.user.address),1),t("li",null,"留言："+e(s.user.message),1),t("li",null,[y("訂單狀態："),t("span",z,e(s.is_paid?"已付款":"未付款"),1)]),F])])])]),t("div",H,[t("button",{type:"button",class:"btn btn-primary",onClick:o[0]||(o[0]=()=>_.payOrder())},"確認付款")])])])])])],64)}const Q=m(w,[["render",W]]);export{Q as default};
